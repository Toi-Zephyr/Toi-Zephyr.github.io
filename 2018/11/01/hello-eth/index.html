<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Zephyr"><title>以太坊初体验 —— 建立一条私有链 · 迷楼</title><meta name="description" content="以太坊初体验 —— 建立一条私有链本文将讲述如何在电脑上，本地搭建一个以太坊私有链。
本文将解决下面问题：

 以太坊的安装
 私有链创世区块搭建
 了解区块各字段的意思
 了解日志输出
 学习使用remix
 编写简单的智能合约
 部署智能合约到私有链上
 了解交易各字段的意思
 私有链节点的加入"><meta name="keywords" content="blog"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">後は野となれ山となれ</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">見ぬが花</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">首頁</a></li><li><a href="/archives">歸檔</a></li><li><a href="/categories">分類</a></li><li><a href="/tags">標籤</a></li><li><a href="/404.html">404</a></li><li><a href="/about/index.html">關於</a></li><li class="soc"><a href="https://github.com/Zophyr" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2019&nbsp;<a target="_blank" href="http://zophyr.com" rel="noopener noreferrer">Zephyr</a></p></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>以太坊初体验 —— 建立一条私有链</a></p><p class="post-meta"><span class="date meta-item">發佈於&nbsp;2018-11-01</span><span class="meta-item"><i class="fa fa-folder"></i><span>&nbsp;</span><a href="/categories/教程/" title="教程" class="a-tag">教程</a><span>&nbsp;</span></span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a href="/tags/教程/" title="教程" class="a-tag">教程</a><span> / </span><a href="/tags/hello-world/" title="hello-world" class="a-tag">hello-world</a><span> / </span><a href="/tags/环境配置/" title="环境配置" class="a-tag">环境配置</a><span> / </span><a href="/tags/eth/" title="eth" class="a-tag">eth</a><span> / </span></span></p><p class="post-abstract"></p><h1 id="以太坊初体验-——-建立一条私有链"><a href="#以太坊初体验-——-建立一条私有链" class="headerlink" title="以太坊初体验 —— 建立一条私有链"></a>以太坊初体验 —— 建立一条私有链</h1><p>本文将讲述如何在电脑上，本地搭建一个以太坊私有链。</p>
<p>本文将解决下面问题：</p>
<ul>
<li style="list-style: none"><input type="checkbox" checked> 以太坊的安装</li>
<li style="list-style: none"><input type="checkbox" checked> 私有链创世区块搭建</li>
<li style="list-style: none"><input type="checkbox" checked> 了解区块各字段的意思</li>
<li style="list-style: none"><input type="checkbox" checked> 了解日志输出</li>
<li style="list-style: none"><input type="checkbox" checked> 学习使用remix</li>
<li style="list-style: none"><input type="checkbox" checked> 编写简单的智能合约</li>
<li style="list-style: none"><input type="checkbox" checked> 部署智能合约到私有链上</li>
<li style="list-style: none"><input type="checkbox" checked> 了解交易各字段的意思</li>
<li style="list-style: none"><input type="checkbox" checked> 私有链节点的加入</li>
</ul>
<h2 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h2><ol>
<li>Windows 10 （1803）</li>
<li>go version go1.11.1 darwin/amd64</li>
<li>Geth Version: 1.8.17-stable</li>
<li>文件操作目录 <code>~/helloEth</code></li>
</ol>
<h2 id="搭建私有链"><a href="#搭建私有链" class="headerlink" title="搭建私有链"></a>搭建私有链</h2><blockquote>
<p>从 〇 到 壹 。</p>
</blockquote>
<h3 id="01-安装Geth"><a href="#01-安装Geth" class="headerlink" title="01/ 安装Geth"></a>01/ 安装Geth</h3><h4 id="Windows-用户"><a href="#Windows-用户" class="headerlink" title="Windows 用户"></a>Windows 用户</h4><ol>
<li>下载 Geth 安装包 （<a href="https://ethereum.github.io/go-ethereum/downloads/" target="_blank" rel="noopener">官网下载地址</a>）</li>
<li>安装 Geth。 </li>
<li>完成！</li>
</ol>
<h4 id="Mac-用户"><a href="#Mac-用户" class="headerlink" title="Mac 用户"></a>Mac 用户</h4><ol start="0">
<li><p>安装「Homebrew」</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span><br></pre></td></tr></table></figure>
</li>
<li><p>升级「Homebrew」</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 Geth</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew tap ethereum/ethereum</span><br><span class="line">brew install ethereum</span><br></pre></td></tr></table></figure>
</li>
<li><p>完成！</p>
</li>
</ol>
<h4 id="检验安装是否成功"><a href="#检验安装是否成功" class="headerlink" title="检验安装是否成功"></a>检验安装是否成功</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> geth version</span><br><span class="line">Geth</span><br><span class="line">Version: 1.8.17-stable</span><br></pre></td></tr></table></figure>
<h3 id="02-配置创世区块参数"><a href="#02-配置创世区块参数" class="headerlink" title="02/ 配置创世区块参数"></a>02/ 配置创世区块参数</h3><ol>
<li><p>创建操作目录文件夹。该文件夹将用于存储以太坊的账号以及相关数据。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mkdir ~/helloEth</span><br><span class="line"><span class="meta">$</span> cd ~/helloEth</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写创世区块配置文件 <code>genesis.json</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> vim genesis.json</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>   在 genesis.json中输入下述代码</p>
   <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> 	<span class="attr">"config"</span>: &#123;</span><br><span class="line">     	<span class="attr">"chainId"</span>: <span class="number">613</span>,</span><br><span class="line">     	<span class="attr">"homesteadBlock"</span>: <span class="number">0</span>,</span><br><span class="line">     	<span class="attr">"eip155Block"</span>: <span class="number">0</span>,</span><br><span class="line">     	<span class="attr">"eip158Block"</span>: <span class="number">0</span></span><br><span class="line"> 	&#125;,</span><br><span class="line"> 	<span class="attr">"alloc"</span>: &#123;&#125;,</span><br><span class="line"> 	<span class="attr">"difficulty"</span>: <span class="string">"20"</span>,</span><br><span class="line"> 	<span class="attr">"gasLimit"</span>: <span class="string">"80860000"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   <strong>参数讲解</strong></p>
<table>
<thead>
<tr>
<th>相关参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>chainId</td>
<td>指定了独立的区块链网络ID。网络ID在连接到其他节点的时候会用到，以太坊公网的网络ID是 1，为了不与公有链网络冲突，运行私有链节点的时候要指定自己的网络ID。不同ID网络的节点无法相互连接。</td>
</tr>
<tr>
<td>homesteadBlock</td>
<td>以太坊的早期版本需要的配置值，当设置为0表示使用Homestead发布该链。</td>
</tr>
<tr>
<td>eip15xBlock</td>
<td>处理硬分叉等事宜，私有链无关</td>
</tr>
<tr>
<td>difficulty</td>
<td>设置设置当前区块的难度，值越大挖矿就越难。</td>
</tr>
<tr>
<td>gasLimit</td>
<td>该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，即智能合约的消耗上限</td>
</tr>
<tr>
<td>alloc</td>
<td>用来预置账号以及账号的以太币数量。</td>
</tr>
</tbody>
</table>
<h3 id="03-初始化创世区块"><a href="#03-初始化创世区块" class="headerlink" title="03/ 初始化创世区块"></a>03/ 初始化创世区块</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> geth --datadir "./" init genesis.json</span><br></pre></td></tr></table></figure>
<p>执行完上述命令可见以下输出反馈：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INFO [11-03|15:37:49.070] Maximum peer count                       ETH=25 LES=0 total=25</span><br><span class="line">INFO [11-03|15:37:49.248] Allocated cache and file handles         database=D:\\geth\\helloEth\\geth\\chaindata cache=16 handles=16</span><br><span class="line">INFO [11-03|15:37:49.341] Writing custom genesis block</span><br><span class="line">INFO [11-03|15:37:49.341] Persisted trie from memory database      nodes=0 size=0.00B time=0s gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B</span><br><span class="line">INFO [11-03|15:37:49.342] Successfully wrote genesis state         database=chaindata                           hash=570bab…526737</span><br><span class="line">INFO [11-03|15:37:49.342] Allocated cache and file handles         database=D:\\geth\\helloEth\\geth\\lightchaindata cache=16 handles=16</span><br><span class="line">INFO [11-03|15:37:49.475] Writing custom genesis block</span><br><span class="line">INFO [11-03|15:37:49.475] Persisted trie from memory database      nodes=0 size=0.00B time=0s gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B</span><br><span class="line">INFO [11-03|15:37:49.476] Successfully wrote genesis state         database=lightchaindata                           hash=570bab…526737</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上述 <strong>INFO</strong> 信息分别表示：当前允许的最大 peer 数量，分配的缓存和文件处理者，写入自定义的创世区块，从内存数据库中读取持久化的 trie，成功写入了创世区块。</p>
</blockquote>
<p>与此同时会在当前目录创建geth和keystore两个文件夹</p>
<ul>
<li><strong>geth目录</strong>：保存链上的区块数据。</li>
<li><strong>keystore目录</strong>：保存链上的用户信息。</li>
</ul>
<h3 id="04-启动区块链"><a href="#04-启动区块链" class="headerlink" title="04/ 启动区块链"></a>04/ 启动区块链</h3><p>执行以下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> geth --port 8086 --networkid 613 --nodiscover --datadir="./" --maxpeers=0 --rpc --rpcport 9527 --rpcaddr 127.0.0.1 --rpccorsdomain "*" --rpcapi "eth,net,web3,personal,miner"</span><br></pre></td></tr></table></figure>
<p><strong>参数讲解</strong></p>
<table>
<thead>
<tr>
<th>相关参数</th>
<th>具体参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>port</td>
<td>8086</td>
<td>网络监听端口，以太坊服务所运行在的网络端口号</td>
</tr>
<tr>
<td>networkid</td>
<td>613</td>
<td>在以太坊网络的唯一标识，可设置为任意值，但是不能与以太坊的保留值冲突，建议范围 [100 ~ 10000]</td>
</tr>
<tr>
<td>nodiscover</td>
<td>-</td>
<td>使用这个参数，你的节点就不会被其他人发现，除非手动添加你的节点。</td>
</tr>
<tr>
<td>datadir</td>
<td>“./“</td>
<td>私有链存放路径</td>
</tr>
<tr>
<td>maxpeers</td>
<td>0</td>
<td>最大网络用户数，设为 0 时无人能够连上该的测试链。</td>
</tr>
<tr>
<td>rpc</td>
<td>-</td>
<td>启动 HTTP-RPC 服务器。这个参数在Geth上是默认的。</td>
</tr>
<tr>
<td>rpcport</td>
<td>9527</td>
<td>RPC 服务器端口</td>
</tr>
<tr>
<td>rpcaddr</td>
<td>127.0.0.1</td>
<td>RPC 服务器地址</td>
</tr>
<tr>
<td>rpccorsdomain</td>
<td>“*”</td>
<td>RPC 服务器域名</td>
</tr>
<tr>
<td>rpcapi</td>
<td>“eth,net,web3,personal,miner”</td>
<td>这个命令指示了允许通过RPC访问的命令。默认情况下，Geth允许web3。</td>
</tr>
</tbody>
</table>
<p>执行完上述命令可见以下输出反馈：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">INFO [11-03|15:44:47.832] Maximum peer count                       ETH=0 LES=0 total=0</span><br><span class="line">INFO [11-03|15:44:47.887] Starting peer-to-peer node               instance=Geth/v1.8.17-stable-8bbe7207/windows-amd64/go1.11.1</span><br><span class="line">INFO [11-03|15:44:47.887] Allocated cache and file handles         database=D:\\geth\\helloEth\\geth\\chaindata cache=768 handles=1024</span><br><span class="line">INFO [11-03|15:44:48.076] Initialised chain configuration          config="&#123;ChainID: 613 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Byzantium: &lt;nil&gt; Constantinople: &lt;nil&gt; Engine: unknown&#125;"</span><br><span class="line">INFO [11-03|15:44:48.077] Disk storage enabled for ethash caches   dir=D:\\geth\\helloEth\\geth\\ethash count=3</span><br><span class="line">INFO [11-03|15:44:48.077] Disk storage enabled for ethash DAGs     dir=C:\\Users\\inpluslab_PC\\AppData\\Ethash count=2</span><br><span class="line">INFO [11-03|15:44:48.077] Initialising Ethereum protocol           versions="[63 62]" network=613</span><br><span class="line">INFO [11-03|15:44:48.077] Loaded most recent local header          number=0 hash=570bab…526737 td=20 age=49y6mo2w</span><br><span class="line">INFO [11-03|15:44:48.077] Loaded most recent local full block      number=0 hash=570bab…526737 td=20 age=49y6mo2w</span><br><span class="line">INFO [11-03|15:44:48.077] Loaded most recent local fast block      number=0 hash=570bab…526737 td=20 age=49y6mo2w</span><br><span class="line">INFO [11-03|15:44:48.080] Regenerated local transaction journal    transactions=0 accounts=0</span><br><span class="line">INFO [11-03|15:44:48.081] Starting P2P networking</span><br><span class="line">INFO [11-03|15:44:48.084] IPC endpoint opened                      url=\\\\.\\pipe\\geth.ipc</span><br><span class="line">INFO [11-03|15:44:48.085] HTTP endpoint opened                     url=http://127.0.0.1:9527 cors=* vhosts=localhost</span><br><span class="line">INFO [11-03|15:44:48.159] RLPx listener up                         self="enode://d469dd263b54e2f7d96e99f8fd01c88c731647f993b561f20d7d51f25636a5eac4e08b85b639e0047f82918b177bee3e3508bf553d59a521752faff2d94f875a@222.200.179.26:8086?discport=0"</span><br><span class="line">INFO [11-03|15:44:49.088] Mapped network port                      proto=tcp extport=8086 intport=8086 interface=NAT-PMP(192.168.199.1)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上述 <strong>INFO</strong> 信息分别表示：当前最大 peer 数量，启动 P2P 节点，分配缓存和文件管理者，初始化链的配置，允许硬盘存储上的缓存和 DAG，初始化以太坊协议，加在最近的头部、全区块、快速区块，重新生成本地交易记录，开启 P2P 网络，RLPx 监听启动，IPC 和 HTTP 启动。</p>
</blockquote>
<p><strong><em>截至到现在，我们已经成功完成搭建一条私有链的目标。完成了从零到一的过程。下面我们将学习区块链的操作，完成从1到10000的目标。</em></strong></p>
<h2 id="操作私有链"><a href="#操作私有链" class="headerlink" title="操作私有链"></a>操作私有链</h2><blockquote>
<p>从 1 到 10000000 。</p>
</blockquote>
<h3 id="01-连接-Geth-Javascript-客户端"><a href="#01-连接-Geth-Javascript-客户端" class="headerlink" title="01/ 连接 Geth Javascript 客户端"></a>01/ 连接 Geth Javascript 客户端</h3><p>区块链成功运行起来后，我们需要添加账户、开始挖矿、转账、添加智能合约等等一系列的操作。而这些操作，我们将通过 Geth Javascript 客户端进行交互与操作。</p>
<p>下面，我们打开一个新的命令窗口，运行下述命令创建客户端。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> geth attach http://127.0.0.1:9527</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通过该命令，我们连接到了我们刚刚创建好的RPC-HTTP服务器上，其端口号与地址为我们刚刚设定的值。</p>
</blockquote>
<p>运行成功后，我们可以看到：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Welcome to the Geth JavaScript console!</span><br><span class="line"></span><br><span class="line">instance: Geth/v1.8.17-stable-8bbe7207/windows-amd64/go1.11.1</span><br><span class="line">modules: eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 web3:1.0</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span> （此处一个闪烁的光彪）</span><br></pre></td></tr></table></figure>
<h3 id="02-创建账号"><a href="#02-创建账号" class="headerlink" title="02/ 创建账号"></a>02/ 创建账号</h3><p>在命令行中输入下述命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> personal.newAccount('littleBear')</span><br></pre></td></tr></table></figure>
<p>上述命令通过给newAccount传递密码作为参数，完成了账号的创建。</p>
<p>创建成功后，会返回一个账号地址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1"</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通常，第一个创建的账号为默认的<code>coinbase</code>账号</p>
</blockquote>
<h3 id="03-成为矿工"><a href="#03-成为矿工" class="headerlink" title="03/ 成为矿工"></a>03/ 成为矿工</h3><p><strong>开始挖矿</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> miner.start()</span><br></pre></td></tr></table></figure>
<p>等待一定的时间，我们便可以在服务器的状态栏，输出log中，看到类似于下述的输出，表明矿工挖到了矿：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">INFO [11-03|16:01:15.212] Etherbase automatically configured       address=0x86f36e6d3D7d0A417B8C9f92f6269fc2210A05f1</span><br><span class="line">INFO [11-03|16:01:52.358] Updated mining threads                   threads=4</span><br><span class="line">INFO [11-03|16:01:52.358] Transaction pool price threshold updated price=1000000000</span><br><span class="line">INFO [11-03|16:01:52.359] Commit new mining work                   number=1 sealhash=016c7e…328e2a uncles=0 txs=0 gas=0 fees=0 elapsed=0s</span><br><span class="line">INFO [11-03|16:01:53.526] Successfully sealed new block            number=1 sealhash=016c7e…328e2a hash=881be3…a7d7c3 elapsed=1.166s</span><br><span class="line">INFO [11-03|16:01:53.526] 🔨 mined potential block                  number=1 hash=881be3…a7d7c3</span><br><span class="line">INFO [11-03|16:01:53.528] Commit new mining work                   number=2 sealhash=3ed01d…2939e1 uncles=0 txs=0 gas=0 fees=0 elapsed=1.998ms</span><br><span class="line">INFO [11-03|16:01:53.878] Successfully sealed new block            number=2 sealhash=3ed01d…2939e1 hash=a37654…801018 elapsed=350.799ms</span><br><span class="line">INFO [11-03|16:01:53.878] 🔨 mined potential block                  number=2 hash=a37654…801018</span><br><span class="line">INFO [11-03|16:01:53.878] Commit new mining work                   number=3 sealhash=06d074…42d329 uncles=0 txs=0 gas=0 fees=0 elapsed=0s</span><br><span class="line">INFO [11-03|16:01:54.110] Successfully sealed new block            number=3 sealhash=06d074…42d329 hash=ab6d14…91e71f elapsed=231.866ms</span><br><span class="line">INFO [11-03|16:01:54.110] 🔨 mined potential block                  number=3 hash=ab6d14…91e71f</span><br><span class="line">INFO [11-03|16:01:54.110] Commit new mining work                   number=4 sealhash=85c7a5…c98ca0 uncles=0 txs=0 gas=0 fees=0 elapsed=0s</span><br><span class="line">INFO [11-03|16:01:55.241] Successfully sealed new block            number=4 sealhash=85c7a5…c98ca0 hash=3ebc5a…d08aa3 elapsed=1.130s</span><br><span class="line">INFO [11-03|16:01:55.241] 🔨 mined potential block                  number=4 hash=3ebc5a…d08aa3</span><br><span class="line">INFO [11-03|16:01:55.241] Commit new mining work                   number=5 sealhash=59080e…649102 uncles=0 txs=0 gas=0 fees=0 elapsed=0s</span><br><span class="line">INFO [11-03|16:01:55.398] Successfully sealed new block            number=5 sealhash=59080e…649102 hash=41a3fe…c7ce91 elapsed=156.910ms</span><br><span class="line">INFO [11-03|16:01:55.398] 🔨 mined potential block                  number=5 hash=41a3fe…c7ce91</span><br><span class="line">INFO [11-03|16:01:55.398] Mining too far in the future             wait=2s</span><br></pre></td></tr></table></figure>
<p><strong>停止挖矿</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> miner.stop()</span><br></pre></td></tr></table></figure>
<h3 id="04-查看余额"><a href="#04-查看余额" class="headerlink" title="04/ 查看余额"></a>04/ 查看余额</h3><p>成为矿工，辛辛苦苦挖矿之后，我们来查看下自己的余额。</p>
<p>有以下两种方式查询：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>  web3.fromWei(eth.getBalance(eth.coinbase), "ether")</span><br><span class="line"></span><br><span class="line">115</span><br></pre></td></tr></table></figure>
<blockquote>
<p>该查询方式的单位为常见的单位，一以太。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> eth.getBalance("0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1")</span><br><span class="line"></span><br><span class="line">115000000000000000000</span><br></pre></td></tr></table></figure>
<blockquote>
<p>该查询方式以 Wei 作为计价单位，所以看上去会很多，实际上换算成以太币需要去掉 18 个 0。</p>
</blockquote>
<p>与此同时，我们来看看矿工挖到的区块，由什么组成：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> eth.getBlock("latest")</span><br></pre></td></tr></table></figure>
<p>得到：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  difficulty: 137676,</span><br><span class="line">  extraData: "0xda83010811846765746888676f312e31312e318777696e646f7773",</span><br><span class="line">  gasLimit: 56439934,</span><br><span class="line">  gasUsed: 0,</span><br><span class="line">  hash: "0x5c5fcb11f83dfc48d897746479f02a0d91b6f34151c1a343a7cc9cef392ad7e5",</span><br><span class="line">  logsBloom: "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",</span><br><span class="line">  miner: "0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1",</span><br><span class="line">  mixHash: "0x1e7a0a50ccaf49a8425af24bd97cc1b4969faf6ebfc837ec64adac29be07d158",</span><br><span class="line">  nonce: "0x30c08cd4f24a9590",</span><br><span class="line">  number: 368,</span><br><span class="line">  parentHash: "0x79cf067b0d7f8b2d519942afa93c036480bca34067e7315e3179ca28cda54dcf",</span><br><span class="line">  receiptsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",</span><br><span class="line">  sha3Uncles: "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",</span><br><span class="line">  size: 541,</span><br><span class="line">  stateRoot: "0xa07db2428d21dcd44ebe67b3ca3fcc084b197295e7ebffbdd2b45e7aa1ea3463",</span><br><span class="line">  timestamp: 1541236677,</span><br><span class="line">  totalDifficulty: 50366901,</span><br><span class="line">  transactions: [],</span><br><span class="line">  transactionsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",</span><br><span class="line">  uncles: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>参数讲解</strong></p>
<table>
<thead>
<tr>
<th>相关参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>difficulty</td>
<td>当前区块的设定难度</td>
</tr>
<tr>
<td>extraData</td>
<td>区块的额外数据</td>
</tr>
<tr>
<td>gasLimit</td>
<td>区块最多允许使用的 gas 量</td>
</tr>
<tr>
<td>gasUsed</td>
<td>区块中交易使用掉的 gas 量</td>
</tr>
<tr>
<td>hash</td>
<td>区块的哈希值</td>
</tr>
<tr>
<td>logsBloom</td>
<td>当前区块的 bloom filter</td>
</tr>
<tr>
<td>miner</td>
<td>挖出该区块的矿工账号</td>
</tr>
<tr>
<td>mixHash</td>
<td>由 nonce 值得出，参与验证 PoW</td>
</tr>
<tr>
<td>nonce</td>
<td>用于验证 PoW 的随机值</td>
</tr>
<tr>
<td>number</td>
<td>区块编号</td>
</tr>
<tr>
<td>parentHash</td>
<td>上一个区块的哈希值</td>
</tr>
<tr>
<td>receiptsRoot</td>
<td>当前区块的回执的哈希根值</td>
</tr>
<tr>
<td>sha3Uncles</td>
<td>区块的 uncle 数据的 SHA3</td>
</tr>
<tr>
<td>size</td>
<td>区块大小</td>
</tr>
<tr>
<td>stateRoot</td>
<td>区块的最终状态的哈希根值</td>
</tr>
<tr>
<td>timestamp</td>
<td>时间戳</td>
</tr>
<tr>
<td>totalDifficulty</td>
<td>整个链耗费在当前区块的时间</td>
</tr>
<tr>
<td>transactions</td>
<td>区块所包含的所有交易</td>
</tr>
<tr>
<td>transactionsRoot</td>
<td>所有交易的哈希根值</td>
</tr>
<tr>
<td>uncles</td>
<td>uncle 哈希的数组</td>
</tr>
</tbody>
</table>
<h3 id="05-转账交易"><a href="#05-转账交易" class="headerlink" title="05/ 转账交易"></a>05/ 转账交易</h3><p>我们通过挖矿挖到了币，下面我们来尝试转账交易。</p>
<ol>
<li><p>创建新用户。转账至少需要两个人，所以我们创建多一个账户。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> personal.newAccount("littlePig")</span><br><span class="line"></span><br><span class="line">"0x791e1755a91b042a39ecb30b6b8b480779ea5200"</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看双方余额。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> eth.getBalance("0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1")</span><br><span class="line"></span><br><span class="line">885000000000000000000</span><br><span class="line"><span class="meta">&gt;</span> eth.getBalance("0x791e1755a91b042a39ecb30b6b8b480779ea5200")</span><br><span class="line"></span><br><span class="line">0</span><br></pre></td></tr></table></figure>
</li>
<li><p>解锁账户。资金的转移，需要先进行账户解锁。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> personal.unlockAccount("0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1")</span><br><span class="line"></span><br><span class="line">Unlock account 0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1</span><br><span class="line">!! Unsupported terminal, password will be echoed.</span><br><span class="line">Passphrase: littleBear</span><br><span class="line"></span><br><span class="line">true</span><br></pre></td></tr></table></figure>
</li>
<li><p>转账。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> eth.sendTransaction(&#123;from:"0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1", to:"0x791e1755a91b042a39ecb30b6b8b480779ea5200", value: 520&#125;)</span><br><span class="line"></span><br><span class="line">"0x22521335039a7e73536579afc6b6ab8c87c4ef0994397a2ed20b63445964effe"</span><br></pre></td></tr></table></figure>
</li>
<li><p>挖矿。转账完成后，如果立刻通过eth.getBalance()查看余额，会发现并没有变化。这是因为sendTransaction这是发起了一笔交易事务，还没有得到确认，只是将这个事务放到了待提交池中。区块链的机制中是新创建区块的时候，会就从事务池中找出所有事务，进行有效性验证，验证成功后进行挖矿并将所有相关事务打包到区块中，待新的去区块成功加入到区块链中后，之前的转账就得到了最终的确认和永久固话。所以，我们需要挖矿。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> miner.start()</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看双方余额。转账成功。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> eth.getBalance("0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1")</span><br><span class="line"></span><br><span class="line">914999999999999999480</span><br><span class="line"><span class="meta">&gt;</span> eth.getBalance("0x791e1755a91b042a39ecb30b6b8b480779ea5200")</span><br><span class="line"></span><br><span class="line">520</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>完成了交易，我们来看看交易具体发生了什么，看看 transaction：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> eth.getTransaction("0x22521335039a7e73536579afc6b6ab8c87c4ef0994397a2ed20b63445964effe")</span><br></pre></td></tr></table></figure>
<p>得到：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  blockHash: "0x140ebfcbdf6395222a5011e1f494f0edcbfa618552ce50c2d61d116b522c606f",</span><br><span class="line">  blockNumber: 178,</span><br><span class="line">  from: "0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1",</span><br><span class="line">  gas: 90000,</span><br><span class="line">  gasPrice: 1000000000,</span><br><span class="line">  hash: "0x22521335039a7e73536579afc6b6ab8c87c4ef0994397a2ed20b63445964effe",</span><br><span class="line">  input: "0x",</span><br><span class="line">  nonce: 0,</span><br><span class="line">  r: "0xe52112a3e8de4e34aeb79639f916a46b7b5aa0f5a9de3a31bc8fb3dd73eaa6b0",</span><br><span class="line">  s: "0x6dcd3492f292a181d7ea562bd5d02ec4c3a4c0090e357dd06658978636a689b9",</span><br><span class="line">  to: "0x791e1755a91b042a39ecb30b6b8b480779ea5200",</span><br><span class="line">  transactionIndex: 0,</span><br><span class="line">  v: "0x4ee",</span><br><span class="line">  value: 520</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>截至到现在，我们已经成功完成学习区块链的操作，完成从1到10000的目标。下面，我们将开始学习部署智能合约并调用。</em></strong></p>
<h2 id="部署并调用智能合约"><a href="#部署并调用智能合约" class="headerlink" title="部署并调用智能合约"></a>部署并调用智能合约</h2><blockquote>
<p>从 黑白 到 彩色 。</p>
</blockquote>
<h3 id="01-编写智能合约"><a href="#01-编写智能合约" class="headerlink" title="01/ 编写智能合约"></a>01/ 编写智能合约</h3><p>在以太坊中，智能合约主要由 <strong>Solidity</strong> 语言编写而成。我们将通过该语言编写出智能合约，并部署到我们建立的区块链中，执行并调用。</p>
<p>以下为 <strong>Solidity</strong> 语言编写的 <em>Hello World</em> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">contract Mortal &#123;</span><br><span class="line">    <span class="comment">/* Define variable owner of the type address */</span></span><br><span class="line">    address owner;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* This function is executed at initialization and sets the owner of the contract */</span></span><br><span class="line">    <span class="function">function <span class="title">Mortal</span><span class="params">()</span> </span>&#123; owner = msg.sender; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Function to recover the funds on the contract */</span></span><br><span class="line">    <span class="function">function <span class="title">kill</span><span class="params">()</span> </span>&#123; <span class="keyword">if</span> (msg.sender == owner) selfdestruct(owner); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract HelloWorld is Mortal &#123;</span><br><span class="line">    <span class="comment">/* Define variable greeting of the type string */</span></span><br><span class="line">    string helloworld = <span class="string">"Hello World!"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* This runs when the contract is executed */</span></span><br><span class="line">    <span class="function">function <span class="title">SayHi</span><span class="params">(string _helloworld)</span> <span class="keyword">public</span> </span>&#123;</span><br><span class="line">        helloworld = _helloworld;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Main function */</span></span><br><span class="line">    <span class="function">function <span class="title">sayHi</span><span class="params">()</span> constant <span class="title">returns</span> <span class="params">(string)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> helloworld;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="02-编译智能合约"><a href="#02-编译智能合约" class="headerlink" title="02/ 编译智能合约"></a>02/ 编译智能合约</h3><p>在编写完智能合约后，我们需要将其编译，使其成为字节码的形式来供我们部署到区块链中。</p>
<p>随着区块链的发展，我们现在不必在本地部署繁琐的开发环境，可直接通过在线的编译器，将我们编写的智能合约编译成为字节码。</p>
<p>借助 <a href="https://remix.ethereum.org/" target="_blank" rel="noopener">Remix 在线编译器</a> ，我们将刚刚编写的智能合约编译成为可部署的命令。</p>
<p>编译后得到如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> helloworldContract = web3.eth.contract([&#123;<span class="string">"constant"</span>:<span class="literal">true</span>,<span class="string">"inputs"</span>:[],<span class="string">"name"</span>:<span class="string">"sayHi"</span>,<span class="string">"outputs"</span>:[&#123;<span class="string">"name"</span>:<span class="string">""</span>,<span class="string">"type"</span>:<span class="string">"string"</span>&#125;],<span class="string">"payable"</span>:<span class="literal">false</span>,<span class="string">"stateMutability"</span>:<span class="string">"view"</span>,<span class="string">"type"</span>:<span class="string">"function"</span>&#125;,&#123;<span class="string">"constant"</span>:<span class="literal">false</span>,<span class="string">"inputs"</span>:[],<span class="string">"name"</span>:<span class="string">"kill"</span>,<span class="string">"outputs"</span>:[],<span class="string">"payable"</span>:<span class="literal">false</span>,<span class="string">"stateMutability"</span>:<span class="string">"nonpayable"</span>,<span class="string">"type"</span>:<span class="string">"function"</span>&#125;,&#123;<span class="string">"constant"</span>:<span class="literal">false</span>,<span class="string">"inputs"</span>:[&#123;<span class="string">"name"</span>:<span class="string">"_helloworld"</span>,<span class="string">"type"</span>:<span class="string">"string"</span>&#125;],<span class="string">"name"</span>:<span class="string">"SayHi"</span>,<span class="string">"outputs"</span>:[],<span class="string">"payable"</span>:<span class="literal">false</span>,<span class="string">"stateMutability"</span>:<span class="string">"nonpayable"</span>,<span class="string">"type"</span>:<span class="string">"function"</span>&#125;]);</span><br><span class="line"><span class="keyword">var</span> helloworld = helloworldContract.new(</span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">from</span>: web3.eth.accounts[<span class="number">0</span>], </span><br><span class="line">     data: <span class="string">'0x606060405260408051908101604052600c81527f48656c6c6f20576f726c642100000000000000000000000000000000000000006020820152600190805161004b92916020019061006c565b5060008054600160a060020a03191633600160a060020a0316179055610107565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100ad57805160ff19168380011785556100da565b828001600101855582156100da579182015b828111156100da5782518255916020019190600101906100bf565b506100e69291506100ea565b5090565b61010491905b808211156100e657600081556001016100f0565b90565b610322806101166000396000f3006060604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416630c49c36c811461005b57806341c0e1b5146100e55780639d44799a146100fa575b600080fd5b341561006657600080fd5b61006e61014b565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156100aa578082015183820152602001610092565b50505050905090810190601f1680156100d75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156100f057600080fd5b6100f86101f4565b005b341561010557600080fd5b6100f860046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061023595505050505050565b61015361024c565b60018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156101e95780601f106101be576101008083540402835291602001916101e9565b820191906000526020600020905b8154815290600101906020018083116101cc57829003601f168201915b505050505090505b90565b6000543373ffffffffffffffffffffffffffffffffffffffff908116911614156102335760005473ffffffffffffffffffffffffffffffffffffffff16ff5b565b600181805161024892916020019061025e565b5050565b60206040519081016040526000815290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061029f57805160ff19168380011785556102cc565b828001600101855582156102cc579182015b828111156102cc5782518255916020019190600101906102b1565b506102d89291506102dc565b5090565b6101f191905b808211156102d857600081556001016102e25600a165627a7a7230582029daeb769f67cf5f6efb52aaf0fc06d6bbb4f66aac5b73c2731a4e1e70fd81300029'</span>, </span><br><span class="line">     gas: <span class="string">'4700000'</span></span><br><span class="line">   &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">e, contract</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e, contract);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> contract.address !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">'Contract mined! address: '</span> + contract.address + <span class="string">' transactionHash: '</span> + contract.transactionHash);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="03-部署智能合约"><a href="#03-部署智能合约" class="headerlink" title="03/ 部署智能合约"></a>03/ 部署智能合约</h3><p>将我们刚刚编译好的命令，复制，粘贴进我们的命令行中，回车。</p>
<p>完成部署！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> null [object Object]</span><br><span class="line">Contract mined! address: 0xa97586f92acd398ecdc0a7ee328b4bccb5f24f71 transactionHash: 0x02320730498ecb2c97177d3559968cfa486eadb0849d47d2e3d8d385f5399007</span><br></pre></td></tr></table></figure>
<p>尝试调用 helloworld ：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> helloworld.sayHi()</span><br><span class="line"></span><br><span class="line">"Hello World!"</span><br></pre></td></tr></table></figure>
<p>智能合约实际上是部署在交易上面的，那么我们来看看含有智能合约的交易字段变成何样子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>  eth.getTransaction("0x02320730498ecb2c97177d3559968cfa486eadb0849d47d2e3d8d385f5399007")</span><br></pre></td></tr></table></figure>
<p>得到：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  blockHash: "0x401c7add802323234e57c436735bf2b3c4e0efd22b1142c7a726f3b663cadac5",</span><br><span class="line">  blockNumber: 251,</span><br><span class="line">  from: "0x86f36e6d3d7d0a417b8c9f92f6269fc2210a05f1",</span><br><span class="line">  gas: 4700000,</span><br><span class="line">  gasPrice: 1000000000,</span><br><span class="line">  hash: "0x02320730498ecb2c97177d3559968cfa486eadb0849d47d2e3d8d385f5399007",</span><br><span class="line">  input: "0x606060405260408051908101604052600c81527f48656c6c6f20576f726c642100000000000000000000000000000000000000006020820152600190805161004b92916020019061006c565b5060008054600160a060020a03191633600160a060020a0316179055610107565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100ad57805160ff19168380011785556100da565b828001600101855582156100da579182015b828111156100da5782518255916020019190600101906100bf565b506100e69291506100ea565b5090565b61010491905b808211156100e657600081556001016100f0565b90565b610322806101166000396000f3006060604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416630c49c36c811461005b57806341c0e1b5146100e55780639d44799a146100fa575b600080fd5b341561006657600080fd5b61006e61014b565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156100aa578082015183820152602001610092565b50505050905090810190601f1680156100d75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156100f057600080fd5b6100f86101f4565b005b341561010557600080fd5b6100f860046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061023595505050505050565b61015361024c565b60018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156101e95780601f106101be576101008083540402835291602001916101e9565b820191906000526020600020905b8154815290600101906020018083116101cc57829003601f168201915b505050505090505b90565b6000543373ffffffffffffffffffffffffffffffffffffffff908116911614156102335760005473ffffffffffffffffffffffffffffffffffffffff16ff5b565b600181805161024892916020019061025e565b5050565b60206040519081016040526000815290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061029f57805160ff19168380011785556102cc565b828001600101855582156102cc579182015b828111156102cc5782518255916020019190600101906102b1565b506102d89291506102dc565b5090565b6101f191905b808211156102d857600081556001016102e25600a165627a7a7230582029daeb769f67cf5f6efb52aaf0fc06d6bbb4f66aac5b73c2731a4e1e70fd81300029",</span><br><span class="line">  nonce: 1,</span><br><span class="line">  r: "0x42a5c8e6cc0ab969a5169796471e37a1d53a0af04f1401f3a40af4996a046a25",</span><br><span class="line">  s: "0x15fa0475fefe40e8d510dc80dbf3c92cfed3e4a4ec2771616427fad9857ae8f5",</span><br><span class="line">  to: null,</span><br><span class="line">  transactionIndex: 0,</span><br><span class="line">  v: "0x4ee",</span><br><span class="line">  value: 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>变化主要接种在value中，value为 0 代表该交易用以部署智能合约。</p>
<p><strong><em>截至到现在，我们已经成功完成学习部署智能合约并调用。下面，我们来学习在私有链中，加入多节点</em></strong></p>
<h2 id="添加多节点"><a href="#添加多节点" class="headerlink" title="添加多节点"></a>添加多节点</h2><blockquote>
<p>从 单 到 双 。</p>
</blockquote>
<h3 id="01-创建多节点"><a href="#01-创建多节点" class="headerlink" title="01/ 创建多节点"></a>01/ 创建多节点</h3><p><strong>创建节点一</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir ./node1/ init genesis.json</span><br><span class="line">geth --datadir node1 --nodiscover --networkid 51024 --port 30123 console</span><br></pre></td></tr></table></figure>
<p><strong>创建节点二</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir ./node2/ init genesis.json</span><br><span class="line">geth --datadir node2 --nodiscover --networkid 51024 --port 30124 --ipcdisable console</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>⚠️ 注意</strong><br>在第二个节点创建的时候，必须添加参数 <code>--ipcdisable</code>。<br>该参数表示启动节点时关闭文件rpc服务。<br>因为windows下的prc是默认放在同一个文件下，会导致多节点启动时无法启动并报错：Fatal: Error starting protocol stack: Access is denied. 解决办法就是添加这个参数关闭这个节点的rpc服务。</p>
</blockquote>
<h3 id="02-得到节点-enode-标示符"><a href="#02-得到节点-enode-标示符" class="headerlink" title="02/ 得到节点 enode 标示符"></a>02/ 得到节点 enode 标示符</h3><p>在<strong>节点二</strong>的终端中，输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> admin.nodeInfo</span><br></pre></td></tr></table></figure>
<p>可得到：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  enode: "enode://fceb323e8d8f92a8b889285db9e7f5fe3c00e4d85bf5e7322f1f94be656a3e29b0fa568e05d3c3d5f651072e819f81f26e7a752e7960433a23b93d180d8ca642@222.200.179.26:30124?discport=0",</span><br><span class="line">  id: "537068799d08f5b45ac16bdbff980becac346ea950d425e09a59d0abc380b1d5",</span><br><span class="line">  ip: "222.200.179.26",</span><br><span class="line">  listenAddr: "[::]:30124",</span><br><span class="line">  name: "Geth/v1.8.17-stable-8bbe7207/windows-amd64/go1.11.1",</span><br><span class="line">  ports: &#123;</span><br><span class="line">    discovery: 0,</span><br><span class="line">    listener: 30124</span><br><span class="line">  &#125;,</span><br><span class="line">  protocols: &#123;</span><br><span class="line">    eth: &#123;</span><br><span class="line">      config: &#123;</span><br><span class="line">        chainId: 316,</span><br><span class="line">        eip150Hash: "0x0000000000000000000000000000000000000000000000000000000000000000",</span><br><span class="line">        eip155Block: 0,</span><br><span class="line">        eip158Block: 0,</span><br><span class="line">        homesteadBlock: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      difficulty: 26941877,</span><br><span class="line">      genesis: "0xfc9dfad48c432dee78b0bd6ee3d0b81c22dd2995f0c2ae85e4c68d77000a1a36",</span><br><span class="line">      head: "0x63f8e667c32960f40bfe9326c7e0b0eb71331b8691c5eee1ea2acfceb9a00f03",</span><br><span class="line">      network: 51024</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们复制字段<code>enode</code>中的参数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"enode://fceb323e8d8f92a8b889285db9e7f5fe3c00e4d85bf5e7322f1f94be656a3e29b0fa568e05d3c3d5f651072e819f81f26e7a752e7960433a23b93d180d8ca642@222.200.179.26:30124?discport=0"</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>⚠️ 注意</strong><br>我们需要将<code>enode</code>字段中，最后的一部分<br>从<code>@</code>开始到<code>:30124？discport=0</code>结束间的这一部分的<br><code>222.200.179.26</code><br>替换成<br><code>[::]</code></p>
</blockquote>
<p>得到</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"enode://fceb323e8d8f92a8b889285db9e7f5fe3c00e4d85bf5e7322f1f94be656a3e29b0fa568e05d3c3d5f651072e819f81f26e7a752e7960433a23b93d180d8ca642@[::]:30124?discport=0"</span><br></pre></td></tr></table></figure>
<h3 id="03-添加节点"><a href="#03-添加节点" class="headerlink" title="03/ 添加节点"></a>03/ 添加节点</h3><p>在<strong>节点一</strong>的终端中，输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> admin.addPeer("enode://fceb323e8d8f92a8b889285db9e7f5fe3c00e4d85bf5e7322f1f94be656a3e29b0fa568e05d3c3d5f651072e819f81f26e7a752e7960433a23b93d180d8ca642@[::]:30124?discport=0")</span><br></pre></td></tr></table></figure>
<p>得到：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">true</span><br></pre></td></tr></table></figure>
<p>稍等片刻，在<strong>节点一</strong>终端中，会出现：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INFO [11-05|15:54:02.088] Block synchronisation started</span><br><span class="line">INFO [11-05|15:54:02.092] Imported new state entries               count=1 elapsed=0s        processed=1 pending=0 retry=0 duplicate=0 unexpected=0</span><br><span class="line">INFO [11-05|15:54:03.134] Imported new block headers               count=160 elapsed=1.037s    number=160 hash=2a7cfc…d50b13 age=1m17s</span><br><span class="line">INFO [11-05|15:54:03.142] Imported new block receipts              count=95  elapsed=0s        number=95  hash=7a1759…00f5ec age=2m36s    size=380.00B</span><br><span class="line">INFO [11-05|15:54:03.148] Imported new state entries               count=1   elapsed=0s        processed=2 pending=0 retry=0 duplicate=0 unexpected=0</span><br><span class="line">INFO [11-05|15:54:03.154] Imported new block receipts              count=1   elapsed=0s        number=96  hash=7c99c4…819586 age=2m32s    size=4.00B</span><br><span class="line">INFO [11-05|15:54:03.158] Committed new head block                 number=96  hash=7c99c4…819586</span><br><span class="line">INFO [11-05|15:54:03.174] Imported new chain segment               blocks=64 txs=0 mgas=0.000 elapsed=11.993ms  mgasps=0.000 number=160 hash=2a7cfc…d50b13 age=1m17s    cache=38.98kB</span><br><span class="line">INFO [11-05|15:54:05.096] Fast sync complete, auto disabling</span><br></pre></td></tr></table></figure>
<p>我们在<strong>节点一</strong>终端中，输入下述命令查询：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> admin.peers</span><br></pre></td></tr></table></figure>
<p>得到：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">    caps: ["eth/63"],</span><br><span class="line">    enode: "enode://fceb323e8d8f92a8b889285db9e7f5fe3c00e4d85bf5e7322f1f94be656a3e29b0fa568e05d3c3d5f651072e819f81f26e7a752e7960433a23b93d180d8ca642@[::]:30124?discport=0",</span><br><span class="line">    id: "537068799d08f5b45ac16bdbff980becac346ea950d425e09a59d0abc380b1d5",</span><br><span class="line">    name: "Geth/v1.8.17-stable-8bbe7207/windows-amd64/go1.11.1",</span><br><span class="line">    network: &#123;</span><br><span class="line">      inbound: false,</span><br><span class="line">      localAddress: "127.0.0.1:59622",</span><br><span class="line">      remoteAddress: "127.0.0.1:30124",</span><br><span class="line">      static: true,</span><br><span class="line">      trusted: false</span><br><span class="line">    &#125;,</span><br><span class="line">    protocols: &#123;</span><br><span class="line">      eth: &#123;</span><br><span class="line">        difficulty: 21527596,</span><br><span class="line">        head: "0x2a7cfc52211a1494343a22290e48d6d981dc523f00ff703130e4301b8ed50b13",</span><br><span class="line">        version: 63</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<p>我们在<strong>节点二</strong>终端中，输入下述命令查询：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> admin.peers</span><br></pre></td></tr></table></figure>
<p>得到：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">    caps: ["eth/63"],</span><br><span class="line">    enode: "enode://4ca464d783599293ec60f92fad5182c48db0ccdcc68231e57a1b940d57b300f5ccf51e6b2c6b755fcded16b1074c9c8259776721cb1ea6daf104b692e6dd987a@127.0.0.1:59622",</span><br><span class="line">    id: "19303593965fd491889516973326aa77afd4e95fd301d94fdc669317818aad39",</span><br><span class="line">    name: "Geth/v1.8.17-stable-8bbe7207/windows-amd64/go1.11.1",</span><br><span class="line">    network: &#123;</span><br><span class="line">      inbound: true,</span><br><span class="line">      localAddress: "127.0.0.1:30124",</span><br><span class="line">      remoteAddress: "127.0.0.1:59622",</span><br><span class="line">      static: false,</span><br><span class="line">      trusted: false</span><br><span class="line">    &#125;,</span><br><span class="line">    protocols: &#123;</span><br><span class="line">      eth: &#123;</span><br><span class="line">        difficulty: 20301042,</span><br><span class="line">        head: "0x27a59d8b4f715babdfbe83b506c11f580b2f6cacb5468fc422cb26bb7142903a",</span><br><span class="line">        version: 63</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<p>节点连接成功！</p>
<h3 id="04-跨节点转账"><a href="#04-跨节点转账" class="headerlink" title="04/ 跨节点转账"></a>04/ 跨节点转账</h3><p>我们分别在两个节点的终端中，创建账户，并挖矿。（参考上文，自己动手实践吧！）</p>
<p>我们在<strong>节点一</strong>终端中，输入下述命令转账（账户已解锁）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> eth.sendTransaction(&#123;from: eth.accounts[0], to:"0xc4eb9fd3973e29aa2d82d5241a75963bdb5501cc", value: 520&#125;)</span><br></pre></td></tr></table></figure>
<p>得到提示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INFO [11-05|15:59:22.226] Setting new local account                address=0x712Dc9360769a7ac0a72Adc521e343f895C9903D</span><br><span class="line">INFO [11-05|15:59:22.231] Submitted transaction                    fullhash=0xc178a91e7d631cb24a055429e2f459d31e3ac55d99480b2548af3a3e4b0819fb recipient=0xC4eb9fd3973E29aa2D82d5241A75963Bdb5501cC</span><br><span class="line">"0xc178a91e7d631cb24a055429e2f459d31e3ac55d99480b2548af3a3e4b0819fb"</span><br></pre></td></tr></table></figure>
<p>开始挖矿，稍后，我们便可以在节点二中的账号查询到转的钱啦！</p>
<p><strong>*终端一</strong>的账号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> web3.fromWei(eth.getBalance(eth.accounts[0]), "ether")</span><br><span class="line">194.99999999999999948</span><br></pre></td></tr></table></figure>
<p><strong>*终端二</strong>的账号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> web3.fromWei(eth.getBalance(eth.accounts[0]), "ether")</span><br><span class="line">800.00000000000000052</span><br></pre></td></tr></table></figure>
<p><strong><em>截至到现在，我们已经成功完成学习在私有链中，加入多节点。</em></strong></p>
<h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>至此，我们已经完成了创建一条私有链，操作私有链，部署智能合约并在私有链中，加入多节点。</p>
<p><strong>主要参考资料</strong></p>
<ol>
<li><a href="https://segmentfault.com/a/1190000015350715" target="_blank" rel="noopener">Mac环境搭建以太坊私有链</a></li>
<li><a href="https://www.jianshu.com/p/50e81eb88088" target="_blank" rel="noopener">怎样用Remix编译和使用智能合约</a></li>
<li><a href="https://blog.csdn.net/m0_37327416/article/details/72885521" target="_blank" rel="noopener">以太坊私有链环境下的智能合约的编写、编译、创建与执行</a></li>
</ol>
<p></p></div><div class="share"><span>分享到</span>&nbsp;<span class="soc"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></span><span class="soc"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></span><span class="soc"><a href="http://twitter.com/home?status=http://zophyr.com/2018/11/01/hello-eth/%20迷楼%20以太坊初体验 —— 建立一条私有链" class="fa fa-twitter"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/2018/11/02/hello-des/" title="DES的设计与实现"><i class="fa fa-angle-double-left"></i>&nbsp;上一篇: DES的设计与实现</a></span><span> / </span><span class="next pagbuttons"><a role="navigation" href="/2018/10/31/agenda-go/" title="CLI 命令行实用程序开发实战 - Agenda">下一篇: CLI 命令行实用程序开发实战 - Agenda&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2019&nbsp;<a target="_blank" href="http://zophyr.com" rel="noopener noreferrer">Zephyr</a></p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>